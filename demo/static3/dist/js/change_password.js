jQuery(document).ajaxSend(function(e,t,n){function o(e){var t=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var a=jQuery.trim(n[o]);if(a.substring(0,e.length+1)==e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}function a(e){var t=document.location.host,n=document.location.protocol,o="//"+t,a=n+o;return e==a||e.slice(0,a.length+1)==a+"/"||e==o||e.slice(0,o.length+1)==o+"/"||!/^(\/\/|http:|https:).*/.test(e)}function r(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}!r(n.type)&&a(n.url)&&t.setRequestHeader("X-CSRFToken",o("csrftoken"))}),$("form").submit(function(e){e.preventDefault(),$.ajax({url:"/accounts/change_password/",type:"POST",data:{current_password:$("input[name=current_password]").val(),new_password:$("input[name=new_password]").val(),confirm_new_password:$("input[name=confirm_new_password]").val()},dataType:"json",complete:function(e,t,n){200===e.status?(alert("密碼修改成功!"),window.location.href="/accounts/login/"):(document.getElementById("error").style.display="block",document.getElementById("error").innerHTML='<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>'+e.responseText.split('"')[3],document.getElementById("form-id").reset())}})});var total_cookie=document.cookie,tmp=total_cookie.split(";");tmp[0].indexOf("nickname")!=-1?nickname=tmp[0].split("=")[1]:nickname=tmp[1].split("=")[1],document.getElementById("user-icon-id").style.display="block",document.getElementById("nickname").innerHTML=nickname+'<span class="caret"></span>';