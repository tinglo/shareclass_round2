function control_button(){0==error_username&&0==error_password?document.getElementById("submit-button").disabled=!1:document.getElementById("submit-button").disabled=!0}function validate_username(){var e=$("#username").val();0==e.length&&($("#validate-error-username").text(""),error_username=!0,control_button()),0!=e.length&&e.search(emailRule)==-1&&($("#validate-error-username").text("信箱格式不符"),error_username=!0,control_button()),e.search(emailRule)!=-1&&($("#validate-error-username").text(""),error_username=!1,control_button())}function validate_password_format(){var e=$("#password").val();e.length<21&&e.length>5&&e.search(pwdRule)!=-1?($("#validate-error-password-format").text(""),error_password=!1):(0==e.length?$("#validate-error-password-format").text(""):$("#validate-error-password-format").text("密碼格式不符"),error_password=!0)}function validate_password_same(){$(document).ready(function(){$("#password").keyup(check_pwd),$("#confirm-password").keyup(check_pwd)})}function check_pwd(){var e=$("#password").val(),r=$("#confirm-password").val();e==r?($("#validate-error-password").text(""),error_password=!1):($("#validate-error-password").text("輸入密碼不相同"),error_password=!0),control_button()}var error_username=!0,error_password=!0;emailRule=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,pwdRule=/^.[A-Za-z0-9]+$/,jQuery(document).ajaxSend(function(e,r,t){function o(e){var r=null;if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),o=0;o<t.length;o++){var a=jQuery.trim(t[o]);if(a.substring(0,e.length+1)==e+"="){r=decodeURIComponent(a.substring(e.length+1));break}}return r}function a(e){var r=document.location.host,t=document.location.protocol,o="//"+r,a=t+o;return e==a||e.slice(0,a.length+1)==a+"/"||e==o||e.slice(0,o.length+1)==o+"/"||!/^(\/\/|http:|https:).*/.test(e)}function n(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}!n(t.type)&&a(t.url)&&r.setRequestHeader("X-CSRFToken",o("csrftoken"))}),$("form").submit(function(e){e.preventDefault(),$.ajax({url:"/accounts/register/",type:"POST",data:{username:$("input[name=username]").val(),password:$("input[name=password]").val(),confirm_password:$("input[name=confirm_password]").val()},dataType:"json",complete:function(e,r,t){201===e.status?window.location.href="/":(document.getElementById("error").style.display="block",document.getElementById("error").innerHTML='<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>'+e.responseText.split('"')[3],document.getElementById("form-id").reset())}})});